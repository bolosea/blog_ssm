(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{22:function(t,s,e){"use strict";e.r(s);var n,a,i,c=e(4),o=e.n(c),r=e(7),l=e.n(r),m=e(0),u=e.n(m),p={props:{comments:{type:Array,required:!0},articleId:{required:!0}},components:{},data:function(){return{inputComment:"",showItemId:"",showAdd:!1,showItemName:"",replyName:""}},computed:{},methods:{showAddHandle:function(){this.showAdd=!0},likeClick:function(t){null===t.isLike?(u.a.$set(t,"isLike",!0),t.likeNum++):(t.isLike?t.likeNum--:t.likeNum++,t.isLike=!t.isLike)},cancel:function(){this.inputComment="",this.showItemId="",this.showAdd=!1},commitComment:(n=l()(o.a.mark(function t(){var s,e,n,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=JSON.parse(localStorage.getItem("user"))){t.next=5;break}return t.abrupt("return",this.$message({type:"error",message:"请先登录!"}));case 5:return t.next=7,this.$http.post("/comment/add",{userId:s.id,articleId:this.articleId,content:this.inputComment,username:s.name||null,parentId:this.showItemId||null,parentName:this.showItemName||null});case 7:e=t.sent,n=e.data,a=n.code,i=n.msg,0===a&&(this.$message({type:"success",message:i}),this.$emit("getArticle"),this.cancel());case 11:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)}),showCommentInput:function(t,s){s?(this.replyName="@"+s.username+" ",this.showItemName=s.username):(this.inputComment="",this.showItemName=t.username),this.showItemId=t.id}},created:function(){}},d=(e(63),e(6)),v={components:{Comment:Object(d.a)(p,function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"new-comment"},[a("div",{staticClass:"new-head"},[a("img",{staticClass:"avatar",attrs:{src:e(36),alt:""}}),n._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:n.inputComment,expression:"inputComment"}],staticClass:"comment-content",attrs:{placeholder:"写下你的评论...",cols:"30",rows:"10"},domProps:{value:n.inputComment},on:{focus:n.showAddHandle,input:function(t){t.target.composing||(n.inputComment=t.target.value)}}})]),n._v(" "),n.showAdd?a("div",{staticClass:"btn-control"},[a("span",{staticClass:"cancel",on:{click:n.cancel}},[n._v("取消")]),n._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"success",round:""},on:{click:n.commitComment}},[n._v("确定")])],1):n._e()]),n._v(" "),0<n.comments.length?a("div",{staticClass:"jingcai"},[a("span",[n._v("精彩评论("+n._s(n.comments.length)+")")])]):n._e(),n._v(" "),n._l(n.comments,function(e){return a("div",{key:e.id,staticClass:"comment"},[a("div",{staticClass:"info"},[a("img",{staticClass:"avatar",attrs:{src:e.fromAvatar,width:"36",height:"36"}}),n._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"name"},[n._v(n._s(e.username))]),n._v(" "),a("div",{staticClass:"date"},[n._v(n._s(e.createTime))])])]),n._v(" "),a("div",{staticClass:"content"},[n._v(n._s(e.content))]),n._v(" "),a("div",{staticClass:"control"},[a("span",{staticClass:"like",class:{active:e.isLike},on:{click:function(t){return n.likeClick(e)}}},[a("i",{staticClass:"iconfont icon-like"}),n._v(" "),a("span",{staticClass:"like-num"},[n._v(n._s(0<e.likeNum?e.likeNum+"人赞":"赞"))])]),n._v(" "),a("span",{staticClass:"comment-reply",on:{click:function(t){return n.showCommentInput(e)}}},[a("i",{staticClass:"iconfont icon-comment"}),n._v(" "),a("span",[n._v("回复")])])]),n._v(" "),a("div",{staticClass:"reply"},[n._l(e.children,function(s){return a("div",{key:s.id,staticClass:"item"},[a("div",{staticClass:"reply-content"},[a("span",{staticClass:"from-name"},[n._v(n._s(s.username))]),n._v(" "),a("span",[n._v(":")]),n._v(" "),a("span",{staticClass:"to-name"},[n._v("@"+n._s(s.parentName))]),n._v(" "),a("span",[n._v(n._s(s.content))])]),n._v(" "),a("div",{staticClass:"reply-bottom"},[a("span",[n._v(n._s(s.createTime))]),n._v(" "),a("span",{staticClass:"reply-text",on:{click:function(t){return n.showCommentInput(e,s)}}},[a("i",{staticClass:"iconfont icon-comment"}),n._v(" "),a("span",[n._v("回复")])])])])}),n._v(" "),0<e.children.length?a("div",{staticClass:"write-reply",on:{click:function(t){return n.showCommentInput(e)}}},[a("i",{staticClass:"el-icon-edit"}),n._v(" "),a("span",{staticClass:"add-comment"},[n._v("添加新评论")])]):n._e(),n._v(" "),a("transition",{attrs:{name:"fade"}},[n.showItemId===e.id?a("div",{staticClass:"input-wrapper"},[n.replyName?a("el-tag",[n._v(n._s(n.replyName))]):n._e(),n._v(" "),a("el-input",{staticClass:"gray-bg-input",attrs:{type:"textarea",rows:3,autofocus:"",placeholder:"写下你的评论"},model:{value:n.inputComment,callback:function(t){n.inputComment=t},expression:"inputComment"}}),n._v(" "),a("div",{staticClass:"btn-control"},[a("span",{staticClass:"cancel",on:{click:n.cancel}},[n._v("取消")]),n._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"success",round:""},on:{click:n.commitComment}},[n._v("确定")])],1)],1):n._e()])],2)])})],2)},[],!1,null,"5595a1c8",null).exports},data:function(){return{article:{},comments:[]}},methods:{getArticle:(i=l()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/article/get",{params:{id:this.$route.params.id}});case 2:0===(s=t.sent).data.code&&(this.article=s.data.data,this.getComments(s.data.data.id));case 5:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)}),getComments:(a=l()(o.a.mark(function t(s){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/comment/getById",{params:{id:s}});case 2:0===(e=t.sent).data.code&&(this.comments=e.data.data);case 4:case"end":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)})},mounted:function(){this.getArticle()}},h=(e(64),Object(d.a)(v,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"archive"},[e("div",{staticClass:"title"},[e("h1",[t._v(t._s(t.article.title))]),t._v(" "),e("div",{staticClass:"meta"},[e("router-link",{attrs:{to:""}},[e("span",{staticClass:"iconfont icon-fenlei"},[e("span",{staticClass:"green"},[t._v("APP")])])]),t._v(" "),e("router-link",{attrs:{to:""}},[e("span",{staticClass:"iconfont icon-gerenzhongxin1"},[e("span",{staticClass:"green"},[t._v(t._s(t.article.author))])])]),t._v(" "),e("span",{staticClass:"iconfont icon-shijian"},[t._v("2019-2-3")]),t._v(" "),e("router-link",{attrs:{to:""}},[e("span",{staticClass:"iconfont icon-pinglun"},[e("span",{staticClass:"green"},[t._v("2评论")])])])],1)]),t._v(" "),e("div",{staticClass:"content"},[e("div",{domProps:{innerHTML:t._s(t.article.content)}})]),t._v(" "),e("Comment",{attrs:{comments:t.comments,articleId:t.article.id},on:{getArticle:t.getArticle}})],1)},[],!1,null,"f62a2c70",null));s.default=h.exports},36:function(t,s,e){t.exports=e.p+"imgs/logo.f3ae05b.png"},43:function(t,s,e){},44:function(t,s,e){},63:function(t,s,e){"use strict";var n=e(43);e.n(n).a},64:function(t,s,e){"use strict";var n=e(44);e.n(n).a}}]);